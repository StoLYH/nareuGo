<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
  결제(Payment) 관련 MyBatis 매퍼 XML
  
  토스페이먼츠 API를 통해 승인된 결제 정보를 데이터베이스에 저장합니다.
  주문(Order)과 1:1 관계를 가지며, 결제 고유 키와 승인 정보를 관리합니다.
-->
<mapper namespace="org.example.nareugobackend.mapper.PaymentMapper">
  
  <!-- 결제 정보 저장 (토스 승인 후 호출) -->
  <insert id="save" parameterType="org.example.nareugobackend.common.model.Payment" useGeneratedKeys="true" keyProperty="paymentId">
    INSERT INTO payments (order_id, payment_key, amount, status, approved_at)
    VALUES (#{payment.orderId}, #{payment.paymentKey}, #{payment.amount}, #{payment.status}, #{payment.approvedAt})
  </insert>
</mapper>